<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Biblioteca UniversitÃ¡ria</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="container">
      <header>
        <h1>ðŸ“š Biblioteca UniversitÃ¡ria</h1>
      </header>

      <div id="homeView">
        <div class="toolbar">
          <div class="search-box">
            <i class="material-icons">search</i>
            <input
              type="text"
              id="searchInput"
              placeholder="Pesquisar..."
              onkeyup="filterBooks()"
            />
          </div>

          <button class="btn-primary" onclick="openModal('bookModal')">
            <i class="material-icons">add</i> Cadastrar Livro
          </button>

          <button class="btn-danger" onclick="deleteSelectedBooks()">
            <i class="material-icons">delete</i> Excluir Livro
          </button>

          <button class="btn-accent" onclick="openModal('loanModal')">
            <i class="material-icons">person_add</i> Registrar EmprÃ©stimo
          </button>
        </div>

        <div class="table-container">
          <table>
            <thead>
              <tr>
                <th style="width: 40px">
                  <input
                    type="checkbox"
                    id="selectAll"
                    onchange="toggleAll(this)"
                  />
                </th>
                <th>TÃ­tulo</th>
                <th>Autor</th>
                <th>GÃªnero</th>
                <th>DisponÃ­veis</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="bookTableBody"></tbody>
          </table>
        </div>
      </div>

      <div id="detailView">
        <button
          style="
            background: none;
            border: 1px solid #ccc;
            color: #333;
            margin-bottom: 20px;
          "
          onclick="showHome()"
        >
          Voltar
        </button>
        <div class="detail-header">
          <img id="detImg" src="" class="detail-img" />
          <div class="detail-info">
            <h2 id="detTitle"></h2>
            <p>Autor: <span id="detAuthor"></span></p>
            <p>
              Status: <span id="detStatus" style="font-weight: bold"></span>
            </p>
            <p>Estoque: <span id="detStock"></span></p>
            <p
              id="detDesc"
              style="margin-top: 20px; color: #555; line-height: 1.6"
            ></p>
          </div>
        </div>
      </div>
    </div>

    <div id="bookModal" class="modal-overlay">
      <div class="modal">
        <span class="close-modal" onclick="closeModal('bookModal')"
          >&times;</span
        >
        <h2>Novo Livro</h2>
        <form id="bookForm">
          <div class="form-group">
            <label>TÃ­tulo</label
            ><input type="text" name="titulo" class="form-control" required />
          </div>
          <div class="form-group">
            <label>Autor</label>
            <input
              type="text"
              name="autor_nome"
              list="authorsList"
              class="form-control"
              required
            />
            <datalist id="authorsList"></datalist>
          </div>
          <div class="form-group">
            <label>GÃªneros</label>
            <div class="genre-grid" id="genreOptions"></div>
          </div>
          <div style="display: flex; gap: 15px">
            <div class="form-group" style="flex: 1">
              <label>Estoque</label
              ><input
                type="number"
                name="estoque"
                class="form-control"
                required
              />
            </div>
            <div class="form-group" style="flex: 1">
              <label>PÃ¡ginas</label
              ><input
                type="number"
                name="paginas"
                class="form-control"
                required
              />
            </div>
          </div>
          <div class="form-group">
            <label>Data Pub.</label
            ><input
              type="date"
              name="data_publicacao"
              class="form-control"
              required
            />
          </div>
          <div class="form-group">
            <label>Capa</label
            ><input type="file" name="capa_do_livro" class="form-control" />
          </div>
          <div class="form-group">
            <label>DescriÃ§Ã£o</label
            ><textarea
              name="descricao"
              class="form-control"
              rows="3"
            ></textarea>
          </div>
          <button type="submit" class="btn-primary" style="width: 100%">
            Salvar
          </button>
        </form>
      </div>
    </div>

    <div id="loanModal" class="modal-overlay">
      <div class="modal">
        <span class="close-modal" onclick="closeModal('loanModal')"
          >&times;</span
        >
        <h2>ðŸ“š Novo EmprÃ©stimo</h2>
        <form id="loanForm">
          <div class="form-group">
            <label>Livro Solicitado</label>
            <select
              id="loanBookSelect"
              name="livro"
              class="form-control"
              required
            ></select>
          </div>

          <hr style="margin: 20px 0; border: 0; border-top: 1px solid #eee" />
          <h3 style="font-size: 1rem; color: #666; margin-bottom: 15px">
            Dados do Aluno
          </h3>

          <div class="form-group">
            <label>CPF (Apenas nÃºmeros)</label>
            <input
              type="text"
              name="aluno_cpf"
              class="form-control"
              placeholder="000.000.000-00"
              required
            />
          </div>

          <div class="form-group">
            <label>Nome Completo</label>
            <input
              type="text"
              name="aluno_nome"
              class="form-control"
              placeholder="Preencher se for novo aluno"
            />
          </div>

          <div style="display: flex; gap: 15px">
            <div class="form-group" style="flex: 1">
              <label>Data Nascimento</label>
              <input type="date" name="aluno_nascimento" class="form-control" />
            </div>
            <div class="form-group" style="flex: 1">
              <label>Turma</label>
              <input type="text" name="aluno_turma" class="form-control" />
            </div>
          </div>

          <div class="form-group">
            <label>Curso</label>
            <input type="text" name="aluno_curso" class="form-control" />
          </div>

          <button type="submit" class="btn-accent" style="width: 100%">
            Confirmar EmprÃ©stimo
          </button>
        </form>
      </div>
    </div>

    <script src="main.js"></script>
  </body>
</html>
